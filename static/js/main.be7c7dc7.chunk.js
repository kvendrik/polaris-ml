(this["webpackJsonppolaris-whiteboarder"]=this["webpackJsonppolaris-whiteboarder"]||[]).push([[0],{103:function(e,t,n){e.exports=n(246)},114:function(e,t){},115:function(e,t){},116:function(e,t){},117:function(e,t){},118:function(e,t){},119:function(e,t){},245:function(e,t,n){},246:function(e,t,n){"use strict";n.r(t);var a=n(14),r=n.n(a),c=n(16),o=n(0),i=n.n(o),l=n(27),s=n.n(l),u=n(101),m=n(17);function f(e){var t,n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(m.e("".concat(e,"/model.json")));case 2:return t=a.sent,a.next=5,r.a.awrap(fetch("".concat(e,"/labels.json")).then((function(e){return e.json()})));case 5:return n=a.sent,a.abrupt("return",(function(e){return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(d(t,n,e));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}))}));case 7:case"end":return a.stop()}}))}function d(e,t,n){var a,o,i,l,s,f,d,b,v,g,w,E,x,y,j,O,k;return r.a.async((function(S){for(;;)switch(S.prev=S.next){case 0:return a=m.h((function(){return m.a.fromPixels(n).expandDims(0)})),o=Object(c.a)(a.shape,3),o[0],i=o[1],l=o[2],S.next=4,r.a.awrap(e.executeAsync(a));case 4:return s=S.sent,f=Object(c.a)(s,2),d=f[0],b=f[1],v=d.dataSync(),g=b.dataSync(),a.dispose(),m.b(s),w=h(v,d.shape[1],d.shape[2]),E=Object(c.a)(w,2),x=E[0],y=E[1],j=m.c(),m.f("cpu"),O=m.h((function(){return m.d.nonMaxSuppression(m.g(g,[b.shape[1],b.shape[3]]),x,20,.5,.5)})),k=O.dataSync(),O.dispose(),m.f(j),S.abrupt("return",Object(u.a)(k).map((function(e){return{boundingBox:p(e,l,i,g),class:t[Math.round(y[e])],score:x[e]}})));case 18:case"end":return S.stop()}}))}function h(e,t,n){for(var a=[],r=[],c=0;c<t;c++){for(var o=Number.MIN_VALUE,i=-1,l=0;l<n;l++)e[c*n+l]>o&&(o=e[c*n+l],i=l);a[c]=o,r[c]=i}return[a,r]}function p(e,t,n,a){for(var r=[],c=0;c<4;c++)r[c]=a[4*e+c];var o=r[0]*n,i=r[1]*t,l=r[2]*n;return{x:i,y:o,width:r[3]*t-i,height:l-o}}var b=n(13);n(120);var v=function(){var e=Object(o.useState)(""),t=Object(c.a)(e,2),n=t[0],a=t[1],r=Object(o.useCallback)((function(e){return a(e)}),[]);return i.a.createElement(b.c,{sectioned:!0},i.a.createElement(b.g,{label:"Text field",value:n,onChange:r}))};var g=function(){return i.a.createElement(b.c,null,i.a.createElement(b.f,{resourceName:{singular:"customer",plural:"customers"},items:[{id:341,url:"customers/341",name:"Mae Jemison",location:"Decatur, USA"},{id:256,url:"customers/256",name:"Ellen Ochoa",location:"Los Angeles, USA"},{id:214,url:"customers/213",name:"John Divee",location:"Ottawa, Canada"}],renderItem:function(e){var t=e.id,n=e.url,a=e.name,r=e.location,c=i.a.createElement(b.b,{customer:!0,size:"medium",name:a});return i.a.createElement(b.e,{id:t,url:n,media:c,accessibilityLabel:"View details for ".concat(a)},i.a.createElement("h3",null,i.a.createElement(b.h,{variation:"strong"},a)),i.a.createElement("div",null,r))}}))};var w=function(e){var t=e.components,n=t.includes("Page");return i.a.createElement(b.a,null,i.a.createElement(b.d,{title:n?"Page":null,primaryAction:n?{content:"Save"}:null},t.map((function(e,t){switch(e){case"TextField":return i.a.createElement(v,{key:t});case"CustomerList":return i.a.createElement(g,{key:t})}}))))};n(245);function E(e){var t=e.getContext("2d");t.clearRect(0,0,t.canvas.width,t.canvas.height)}function x(e,t){var n=e.getContext("2d");n.clearRect(0,0,n.canvas.width,n.canvas.height);var a="14px Open Sans",r=parseInt(a,10);n.font=a,n.textBaseline="top",n.strokeStyle="#2da15f",n.lineWidth=4,n.fillStyle="#2da15f";var c=!0,o=!1,i=void 0;try{for(var l,s=t[Symbol.iterator]();!(c=(l=s.next()).done);c=!0){var u=l.value,m=u.class,f=u.score,d=u.boundingBox,h=d.x,p=d.y,b=d.width,v=d.height;n.strokeRect(h,p,b,v);var g=n.measureText(L(m,f)).width;n.fillRect(h,p,g+4,r+4)}}catch(A){o=!0,i=A}finally{try{c||null==s.return||s.return()}finally{if(o)throw i}}var w=!0,E=!1,x=void 0;try{for(var y,j=t[Symbol.iterator]();!(w=(y=j.next()).done);w=!0){var O=y.value,k=O.class,S=O.score,C=O.boundingBox,N=C.x,R=C.y;n.fillStyle="#000000",n.fillText(L(k,S),N,R)}}catch(A){E=!0,x=A}finally{try{w||null==j.return||j.return()}finally{if(E)throw x}}function L(e,t){return"".concat(e," (").concat(Math.round(100*t),"%)")}}var y=document.getElementById("root");s.a.render(i.a.createElement((function(){var e=Object(o.useMemo)((function(){return new FileReader}),[]),t=Object(o.useRef)(),n=Object(o.useRef)(),a=Object(o.useRef)(),l=Object(o.useState)(""),s=Object(c.a)(l,2),u=s[0],m=s[1],d=Object(o.useState)("Upload a wireframe drawing"),h=Object(c.a)(d,2),p=h[0],b=h[1],v=Object(o.useState)([]),g=Object(c.a)(v,2),y=g[0],j=g[1],O="Loading..."===p,k=Object(o.useMemo)((function(){var e=(window.innerWidth<600?window.innerWidth:600)-48;return{width:e,height:e-100}}),[window.innerWidth]),S=Object(o.useCallback)((function(t){var n=Object(c.a)(t.target.files,1)[0];n&&e.readAsDataURL(n)}),[e]);Object(o.useEffect)((function(){return e.addEventListener("load",(function(e){var t=e.target.result;return R(t)}))}),[e]);var C=Object(o.useCallback)((function(){return R("wireframe-example.jpg")}),[]),N=Object(o.useCallback)((function(){O||n.current.click()}),[O]),R=Object(o.useCallback)((function(e){var n,c;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!O){o.next=2;break}return o.abrupt("return");case 2:return m(e),E(a.current),b("Loading..."),j([]),o.next=8,r.a.awrap(f("model"));case 8:return n=o.sent,o.next=11,r.a.awrap(n(t.current));case 11:c=o.sent,console.log(c),c.length>0?(b("Upload a wireframe drawing"),x(a.current,c),j(c)):b("No components detected. Please try again or check the console for the raw output.");case 14:case"end":return o.stop()}}))}),[O,a,t]),L=y.map((function(e){return e.class}));return console.log(L),i.a.createElement(i.a.Fragment,null,i.a.createElement("main",{className:"control-board"},i.a.createElement("p",{className:"intro container"},"This ",i.a.createElement("a",{href:"https://github.com/kvendrik/polaris-whiteboarder",target:"_blank",rel:"noopener noreferrer"},"experiment")," creates simple ",i.a.createElement("a",{href:"https://polaris.shopify.com",target:"_blank",rel:"noopener noreferrer"},"Polaris")," prototypes from ",i.a.createElement("a",{href:"https://github.com/kvendrik/polaris-ml/tree/master/training-data",target:"_blank",rel:"noopener noreferrer"},"wireframes drawn on a whiteboard"),"."),i.a.createElement("section",{className:"result-status container"},i.a.createElement("p",null,i.a.createElement("button",{className:"status",onClick:N},p),i.a.createElement("br",null),i.a.createElement("small",null,"Don't feel like drawing? ",i.a.createElement("button",{onClick:C},"View an example"))),i.a.createElement("div",{className:"image-container"},i.a.createElement("canvas",{className:"image-container__canvas",ref:a,width:k.width,height:k.height}),i.a.createElement("img",{src:u,ref:t,alt:"",width:k.width,height:k.height})),i.a.createElement("input",{className:"file-picker",ref:n,type:"file",onChange:S}))),y.length>0&&i.a.createElement(i.a.Fragment,null,i.a.createElement("hr",null),i.a.createElement(w,{components:L})))}),null),y)}},[[103,1,2]]]);
//# sourceMappingURL=main.be7c7dc7.chunk.js.map